<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Qlanten | Welcome</title>
  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />

  <!-- CSS -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="css/scheduler_traditional.css">


  <link rel="shortcut icon" href="favicon.png" sizes="32x32" type="image/x-icon">
  <style>
    .row1 {
      color: white;
      background: rgb(0, 0, 0);
    }
  </style>
</head>

<body>

  <ul id="slide-out" class="sidenav">
    <li><a class="sidenav-close" href="#!">Clicking this will close Sidenav</a></li>
  </ul>

  <header>
    <nav>
      <div class="nav-wrapper">
        <a href="#!" class="brand-logo">
          <img src="images/logo.png" alt="logo">
        </a>
        <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>
        <ul class="hide-on-med-and-down">
          <li><a href="#">Home </a></li>
          <li><a href="#">Message</a></li>
          <li><a href="#">Jobs </a></li>
          <li><a href="#">Workers</a></li>
          <li class="active"><a href="#">Calendar</a></li>
        </ul>
        <div class="right-nav">
          <form>
            <input type="text" class="search-input" placeholder="Search">
            <button type="submit"><i class="material-icons">search</i></button>
          </form>
          <div class="other-nav-links">
            <ul>
              <li>
                <a href="#"><i class="material-icons">chat_bubble_outline</i></a>
              </li>
              <li class="has-notification">
                <a href="#"><i class="material-icons">email</i></a>
              </li>
              <li class="has-notification">
                <a href="#"><i class="material-icons">notifications_none</i></a>
              </li>
            </ul>
          </div>
          <div class="profile-link">
            <button type="button" class="dropdown-trigger" data-target='dropdown1'>
              <figure style="background-image: url('images/user-img.png');"></figure>
              <h5>Dave Pearson <small>Administrator</small></h5>
            </button>
            <ul id='dropdown1' class='dropdown-content'>
              <li><a href="#!">one</a></li>
              <li><a href="#!">two</a></li>
            </ul>
          </div>


        </div>

      </div>
    </nav>
  </header>
  <main>
    <div class="row">
      <div class="col s3">
        <div class="datepicker-cover">
          <div class="responsive-calendar">
            <div class="controls">
              <a class="pull-left" data-go="prev">
                <i class="material-icons">chevron_left</i>
              </a>
              <h4><span data-head-year></span> <span data-head-month></span></h4>
              <a class="pull-right" data-go="next">
                <i class="material-icons">chevron_right</i>
              </a>
            </div>
            <div class="day-headers">
              <div class="day header">Mon</div>
              <div class="day header">Tue</div>
              <div class="day header">Wed</div>
              <div class="day header">Thu</div>
              <div class="day header">Fri</div>
              <div class="day header">Sat</div>
              <div class="day header">Sun</div>
            </div>
            <div class="days" data-group="days">
              <!-- the place where days will be generated -->
            </div>
          </div>
        </div>
        <div class="spacer"></div>
        <div class="service-cover">
          <div class="service-head">
            <a class='dropdown-trigger btn' href='#' data-target='dropdown1'>All Service Appointments <i
                class="material-icons">arrow_drop_down</i></a>
            <!-- Dropdown Structure -->
            <ul id='dropdown1' class='dropdown-content'>
              <li><a href="#!">one</a></li>
              <li><a href="#!">two</a></li>
            </ul>
            <div class="sort"><i class="material-icons">sort</i></div>
          </div>
          <ul id="external">
            <li class="service-post" id="WO201900001" data-id="WO201900001" data-duration="3600" data-color="#e1f0ff">
              <div style="cursor:move">
                <div class="service-post-head">
                <h3>WO201900001</h3>
                <i class="material-icons">star</i>
              </div>
              <div class="service-post-body">
                <ul>
                  <li>
                    <i class="material-icons">business_center</i> Leakage in bathroom
                  </li>
                  <li>
                    <i class="material-icons">access_time</i> <strong class="time">08:30 PM - 09:30 PM</strong>
                  </li>
                </ul>
                <div class="user-pro">
                  <figure style="background-image: url('images/user-img.png');"></figure>
                  <div class="resource_name"></div>
                  <a href="#">Details</a>
                </div>
                <div class="status green">
                  <p>
                    Status: <span>New</span>
                  </p>
                </div>
              </div>
              </div>
            </li>
            <li class="service-post" id="WO201900002" data-id="WO201900002" data-duration="7200"><div style="cursor:move">
              <div class="service-post-head">
                <h3>WO201900002</h3>
                <i class="material-icons">star</i>
              </div>
              <div class="service-post-body">
                <ul>
                  <li>
                    <i class="material-icons">business_center</i> Leakage in bathroom
                  </li>
                  <li>
                    <i class="material-icons">access_time</i> <strong>08:30 PM - 09:30 PM</strong>
                  </li>
                </ul>
                <div class="user-pro">
                  <figure style="background-image: url('images/user-img.png');"></figure>
                  <div class="resource_name"></div>
                  <a href="#">Details</a>
                </div>
                <div class="status green">
                  <p>
                    Status: <span>New</span>
                  </p>
                </div>
              </div>
            </div></li>
            <li class="service-post" id="WO201900003" data-id="WO201900003" data-duration="10800" data-color="#f0e4ff"><div style="cursor:move">
              <div class="service-post-head">
                <h3>WO201900003</h3>
                <i class="material-icons">star</i>
              </div>
              <div class="service-post-body">
                <ul>
                  <li>
                    <i class="material-icons">business_center</i> Broken window in kitchen
                  </li>
                  <li>
                    <i class="material-icons">access_time</i> <strong>08:30 PM - 09:30 PM</strong>
                  </li>
                </ul>
                <div class="user-pro">
                  <figure style="background-image: url('images/user-img.png');"></figure>
                  <div class="resource_name"></div>
                  <a href="#">Details</a>
                </div>
                <div class="status green">
                  <p>
                    Status: <span>New</span>
                  </p>
                </div>
              </div>
            </div></li>
            <li class="service-post" id="WO201900004" data-id="WO201900004" data-duration="1800" data-color="#ffefd7"><div style="cursor:move">
              <div class="service-post-head">
                <h3>WO201900004</h3>
                <i class="material-icons">star</i>
              </div>
              <div class="service-post-body">
                <ul>
                  <li>
                    <i class="material-icons">business_center</i> Slamming door in basement
                  </li>
                  <li>
                    <i class="material-icons">access_time</i> <strong>08:30 PM - 09:30 PM</strong>
                  </li>
                </ul>
                <div class="user-pro">
                  <figure style="background-image: url('images/user-img.png');"></figure>
                  <div class="resource_name"></div>
                  <a href="#">Details</a>
                </div>
                <div class="status green">
                  <p>
                    Status: <span>New</span>
                  </p>
                </div>
              </div>
            </div></li>
            <li class="service-post" id="WO201900005" data-id="WO201900005" data-duration="7200" data-color="#d2fff6"><div style="cursor:move">
              <div class="service-post-head">
                <h3>WO201900005</h3>
                <i class="material-icons">star</i>
              </div>
              <div class="service-post-body">
                <ul>
                  <li>
                    <i class="material-icons">business_center</i> Window broken upstairs
                  </li>
                  <li>
                    <i class="material-icons">access_time</i> <strong>08:30 PM - 09:30 PM</strong>
                  </li>
                </ul>
                <div class="user-pro">
                  <figure style="background-image: url('images/user-img.png');"></figure>
                  <div class="resource_name"></div>
                  <a href="#">Details</a>
                </div>
                <div class="status green">
                  <p>
                    Status: <span>New</span>
                  </p>
                </div>
              </div>
            </div></li>
            <li class="service-post" id="WO201900006" data-id="WO201900006" data-duration="14400" data-color="#e1f0ff"><div style="cursor:move">
              <div class="service-post-head">
                <h3>WO201900006</h3>
                <i class="material-icons">star</i>
              </div>
              <div class="service-post-body">
                <ul>
                  <li>
                    <i class="material-icons">business_center</i> Plate broken in garage
                  </li>
                  <li>
                    <i class="material-icons">access_time</i> <strong>08:30 PM - 09:30 PM</strong>
                  </li>
                </ul>
                <div class="user-pro">
                  <figure style="background-image: url('images/user-img.png');"></figure>
                  <div class="resource_name"></div>
                  <a href="#">Details</a>
                </div>
                <div class="status green">
                  <p>
                    Status: <span>New</span>
                  </p>
                </div>
              </div>
            </div></li>
            <li class="service-post" id="WO201900007" data-id="WO201900007" data-duration="9000" data-color="#f0e4ff"><div style="cursor:move">
              <div class="service-post-head">
                <h3>WO201900007</h3>
                <i class="material-icons">star</i>
              </div>
              <div class="service-post-body">
                <ul>
                  <li>
                    <i class="material-icons">business_center</i> Window broken in bathroom
                  </li>
                  <li>
                    <i class="material-icons">access_time</i> <strong class="time">08:30 PM - 09:30 PM</strong>
                  </li>
                </ul>
                <div class="user-pro">
                  <figure style="background-image: url('images/user-img.png');"></figure>
                  <div class="resource_name"></div>
                  <a href="#">Details</a>
                </div>
                <div class="status green">
                  <p>
                    Status: <span>New</span>
                  </p>
                </div>
              </div>
            </div></li>
            <li class="service-post" id="WO201900008" data-id="WO201900008" data-duration="3600" data-color="#ffefd7"><div style="cursor:move">
              <div class="service-post-head">
                <h3>WO201900008</h3>
                <i class="material-icons">star</i>
              </div>
              <div class="service-post-body">
                <ul>
                  <li>
                    <i class="material-icons">business_center</i> Door broken in bedroom
                  </li>
                  <li>
                    <i class="material-icons">access_time</i> <strong>08:30 PM - 09:30 PM</strong>
                  </li>
                </ul>
                <div class="user-pro">
                  <figure style="background-image: url('images/user-img.png');"></figure>
                  <div class="resource_name"></div>
                  <a href="#">Details</a>
                </div>
                <div class="status green">
                  <p>
                    Status: <span>New</span>
                  </p>
                </div>
              </div>
            </div></li>
            <li class="service-post" id="WO201900009" data-id="WO201900009" data-duration="7200" data-color="#d2fff6"><div style="cursor:move">
              <div class="service-post-head">
                <h3>WO201900009</h3>
                <i class="material-icons">star</i>
              </div>
              <div class="service-post-body">
                <ul>
                  <li>
                    <i class="material-icons">business_center</i> Plate broken in basement
                  </li>
                  <li>
                    <i class="material-icons">access_time</i> <strong>08:30 PM - 09:30 PM</strong>
                  </li>
                </ul>
                <div class="user-pro">
                  <figure style="background-image: url('images/user-img.png');"></figure>
                  <div class="resource_name"></div>
                  <a href="#">Details</a>
                </div>
                <div class="status green">
                  <p>
                    Status: <span>New</span>
                  </p>
                </div>
              </div>
            </div></li>
            <li class="service-post" id="WO2019000010" data-id="WO2019000010" data-duration="2700" data-color="#e1f0ff"><div style="cursor:move">
              <div class="service-post-head">
                <h3>WO2019000010</h3>
                <i class="material-icons">star</i>
              </div>
              <div class="service-post-body">
                <ul>
                  <li>
                    <i class="material-icons">business_center</i> Window broken in garage
                  </li>
                  <li>
                    <i class="material-icons">access_time</i> <strong>08:30 PM - 09:30 PM</strong>
                  </li>
                </ul>
                <div class="user-pro">
                  <figure style="background-image: url('images/user-img.png');"></figure>
                  <div class="resource_name"></div>
                  <a href="#">Details</a>
                </div>
                <div class="status green">
                  <p>
                    Status: <span>New</span>
                  </p>
                </div>
              </div>
            </div></li>
          </ul>
        </div>
      </div>
      <div class="col s9">
        <div class="resources-section">
          <div class="buttons">
            <button type="button" class="btn day" onclick="daySchedular()">Day</button>
            <button type="button" class="btn week" onclick="weekSchedular()">Week</button>
            <button type="button" class="btn month" onclick="monthSchedular()">Month</button>
          </div>
          <div id="dp"></div>
        </div>
      </div>
    </div>

  </main>


  <!--JavaScript at end of body for optimized loading-->
  <script src="js/jquery.min.js"></script>
  <script src="js/daypilot-all.min.js"></script>
  <script src="js/materialize.min.js"></script>
  <script src="js/calendar.js"></script>
  <script src="js/custom.js"></script>
<!--   Plugin JS -->
  <script type="text/javascript">

    let eventArray = [];
    let count = 0;
    var dp = new DayPilot.Scheduler("dp");
    daySchedular();

    function daySchedular() {

      // dp.startDate = new DayPilot.Date.today();
      dp.timeHeaders = [
        {
          "groupBy": "Day",
          "format": "dddd, d MMMM yyyy"
        },
        {
          "groupBy": "Hour"
        },
      ];
      dp.scale = "Hour";
      dp.startDate = new DayPilot.Date();
      dp.cellWidth = 150;
      dp.rowMinHeight = 60;
      dp.timeRangeSelectingStartEndEnabled = true;
      dp.showNonBusiness = false;
      dp.days = 365;
      dp.onBeforeCellRender = function (args) {
        if (args.cell.resource === "L1" || args.cell.resource === "L2" || args.cell.resource === "L3") {
          args.cell.disabled = true;
        }
      };
      dp.treeEnabled = true;
      dp.resources = [
        {
          name: "Location A", id: "L1", expanded: true, children: [
            {name: "ABC Constructors", id: "ABC Constructors"},
            {name: "Mildred Barlow Associates", id: "Mildred Barlow Associates"},
          ]
        },
        {
          name: "Location B", id: "L2", expanded: true, children: [
            {name: "Wishmonger Industries", id: "Wishmonger Industries"},
            {name: "Parkes Unlimited", id: "Parkes Unlimited"},
            {name: "Barlow and Co", id: "Barlow and Co"},
          ]
        },
        {
          name: "Location C", id: "L3", expanded: true, children: [
            {name: "Barlow of Rijssen", id: "Barlow of Rijssen"}
          ]
        },
      ];
      dp.onBeforeRowHeaderRender = function (args) {
        if (args.row.index === 1) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-1.jpg'></div>",}
          ];
        }
        if (args.row.index === 2) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-2.jpg'></div>",}
          ];
        }

        if (args.row.index === 4) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-3.jpg'></div>",}
          ];
        }
        if (args.row.index === 5) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-4.jpg'></div>",}
          ];
        }
        if (args.row.index === 6) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-5.jpg'></div>",}
          ];
        }
        if (args.row.index === 8) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-6.jpg'></div>",}
          ];
        }

        // console.log( args.row);
      };
      dp.onAfterEventRender = function (args) {
        var div = args.div;
        var e = args.e;
        var start = formatTime(e.data.start);
        var end = formatTime(e.data.end);

        var parent = document.getElementById(e.data.id);
        // Time Change
        parent.getElementsByTagName("strong")[0].innerText = start + ' - ' + end;
        // Status Change
        parent.getElementsByClassName("status")[0].getElementsByTagName("p")[0].getElementsByTagName("span")[0].innerText = "Scheduled";
        parent.getElementsByClassName("status")[0].classList.remove("green");
        parent.getElementsByClassName("status")[0].classList.add("orange");
        // Add resource name
        parent.getElementsByClassName('resource_name')[0].innerText = e.data.resource;

        const pushdata = {
          start: e.data.start,
          end: e.data.end,
          id: e.data.id,
          resource:  e.data.resource,
          text: e.data.text,
          bubbleHtml: "Testing bubble"
        };
        if(eventArray.length > 0) {
          for (let i = 0; i < eventArray.length ; i++) {
            if(eventArray[i].id === pushdata.id){
              console.log('hjkj-1');
              break;
            } else {
              console.log('hjkj');
              eventArray.push(pushdata);
            }
          }
        } else {
          eventArray.push(pushdata);
        }

        console.log(eventArray);

        // timeText.html();
        div.ondragover = function (ev) {
          ev.preventDefault();
          ev.dataTransfer.dropEffect = "move";

          // ev.allowed = true;
        };

        div.ondrop = function (ev) {
          var data = ev.dataTransfer.getData("text/plain");
          e.data.text += " " + data;

        };
      };

      if(count === 0) {
        dp.init();
        count++;
      } else {

        dp.clearSelection();
        dp.update();
      }

    }

    function weekSchedular() {
      // var dp = new DayPilot.Scheduler("week");
      dp.timeHeaders = [
        {groupBy: "Week"},
        {groupBy: "Cell", format: "dddd"},
        {groupBy: "Cell", format: "d MMMM yyyy"}
      ];
      dp.scale = "Day";
      dp.days = 365;
      dp.scrollTo(new DayPilot.Date());
      dp.startDate = new DayPilot.Date("2019-01-01").firstDayOfMonth();
      dp.cellWidth = 150;
      dp.rowMinHeight = 60;
      dp.timeRangeSelectingStartEndEnabled = true;
      dp.showNonBusiness = false;
      dp.clearSelection();
      dp.events.list = eventArray;
      console.log(dp.events.list);
      dp.showCurrentTime = true;
      dp.onBeforeCellRender = function (args) {
        if (args.cell.resource === "L1" || args.cell.resource === "L2" || args.cell.resource === "L3") {
          args.cell.disabled = true;
        }

        if (args.cell.start.getDatePart().getTime() === new DayPilot.Date().getDatePart().getTime()) {
          args.cell.backColor = "silver";
        }
      };
      dp.treeEnabled = true;
      dp.resources = [
        {
          name: "Location A", id: "L1", expanded: true, children: [
            {name: "ABC Constructors", id: "ABC Constructors"},
            {name: "Mildred Barlow Associates", id: "Mildred Barlow Associates"},
          ]
        },
        {
          name: "Location B", id: "L2", expanded: true, children: [
            {name: "Wishmonger Industries", id: "Wishmonger Industries"},
            {name: "Parkes Unlimited", id: "Parkes Unlimited"},
            {name: "Barlow and Co", id: "Barlow and Co"},
          ]
        },
        {
          name: "Location C", id: "L3", expanded: true, children: [
            {name: "Barlow of Rijssen", id: "Barlow of Rijssen"}
          ]
        },
      ];
      dp.onBeforeRowHeaderRender = function (args) {
        if (args.row.index === 1) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-1.jpg'></div>",}
          ];
        }
        if (args.row.index === 2) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-2.jpg'></div>",}
          ];
        }

        if (args.row.index === 4) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-3.jpg'></div>",}
          ];
        }
        if (args.row.index === 5) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-4.jpg'></div>",}
          ];
        }
        if (args.row.index === 6) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-5.jpg'></div>",}
          ];
        }
        if (args.row.index === 8) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-6.jpg'></div>",}
          ];
        }

        // console.log( args.row);
      };
      dp.onAfterEventRender = function (args) {
        var div = args.div;
        var e = args.e;

        // timeText.html();
        div.ondragover = function (ev) {
          ev.preventDefault();
          ev.dataTransfer.dropEffect = "move";
          // ev.allowed = true;
        };

        div.ondrop = function (ev) {
          var data = ev.dataTransfer.getData("text/plain");
          e.data.text += " " + data;
        };
      };
      dp.update();
    }

    function monthSchedular(){
      // var dp = new DayPilot.Scheduler("month");
      dp.startDate = new DayPilot.Date("2019-01-01").firstDayOfMonth();
      dp.cellGroupBy = "Month";

      dp.timeHeaders = [
        {groupBy: "Month"},
        {groupBy: "Cell", format: "d MMMM yyyy"}
      ];
      dp.scale = "Day";
      dp.scrollTo(new DayPilot.Date());
      dp.days = 365;
      dp.cellWidth = 150;
      dp.rowMinHeight = 60;
      dp.timeRangeSelectingStartEndEnabled = true;
      dp.showNonBusiness = false;
      dp.clearSelection();
      dp.events.list = eventArray;
      dp.showCurrentTime = true;
      dp.onBeforeCellRender = function (args) {
        if (args.cell.resource === "L1" || args.cell.resource === "L2" || args.cell.resource === "L3") {
          args.cell.disabled = true;
        }

        if (args.cell.start.getDatePart().getTime() === new DayPilot.Date().getDatePart().getTime()) {
          args.cell.backColor = "silver";
        }
      };
      dp.treeEnabled = true;
      dp.resources = [
        {
          name: "Location A", id: "L1", expanded: true, children: [
            {name: "ABC Constructors", id: "ABC Constructors"},
            {name: "Mildred Barlow Associates", id: "Mildred Barlow Associates"},
          ]
        },
        {
          name: "Location B", id: "L2", expanded: true, children: [
            {name: "Wishmonger Industries", id: "Wishmonger Industries"},
            {name: "Parkes Unlimited", id: "Parkes Unlimited"},
            {name: "Barlow and Co", id: "Barlow and Co"},
          ]
        },
        {
          name: "Location C", id: "L3", expanded: true, children: [
            {name: "Barlow of Rijssen", id: "Barlow of Rijssen"}
          ]
        },
      ];
      dp.onBeforeRowHeaderRender = function (args) {
        if (args.row.index === 1) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-1.jpg'></div>",}
          ];
        }
        if (args.row.index === 2) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-2.jpg'></div>",}
          ];
        }

        if (args.row.index === 4) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-3.jpg'></div>",}
          ];
        }
        if (args.row.index === 5) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-4.jpg'></div>",}
          ];
        }
        if (args.row.index === 6) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-5.jpg'></div>",}
          ];
        }
        if (args.row.index === 8) {
          args.row.areas = [
            {html: "<div class='scheduler_img' ><img src='images/user-img-6.jpg'></div>",}
          ];
        }

        // console.log( args.row);
      };
      dp.onAfterEventRender = function (args) {
        var div = args.div;
        var e = args.e;

        // timeText.html();
        div.ondragover = function (ev) {
          ev.preventDefault();
          ev.dataTransfer.dropEffect = "move";
        };

        div.ondrop = function (ev) {
          var data = ev.dataTransfer.getData("text/plain");
          e.data.text += " " + data;
        };
      };
      dp.update();
    }

    function makeDraggable() {
      var parent = document.getElementById("external");
      var items = parent.getElementsByTagName("li");
      for (var i = 0; i < items.length; i++) {
        var e = items[i];
        var item = {
          element: e,
          id: e.getAttribute("data-id"),
          text: e.getAttribute("data-id"),
          duration: e.getAttribute("data-duration"),  // hours
          barColor: e.getAttribute("data-color"),
          barBackColor: e.getAttribute("data-color"),
          backColor: e.getAttribute("data-color"),
          externalCssClass: "external-shadow",
          bubbleHtml: "Testing bubble",
          keepElement: true

        };

        DayPilot.Scheduler.makeDraggable(item);
      }
    }

    makeDraggable();

    function formatDate() {
      var d = new Date(),
              month = '' + (d.getMonth() + 1),
              day = '' + d.getDate(),
              year = d.getFullYear();

      if (month.length < 2)
        month = '0' + month;
      if (d.length < 2)
        d = '0' + d;

      return [year, month, d].join('-');
    }

    function formatTime(date) {
      var d = new Date(date),
              hour = '' + (d.getHours()),
              minutes = '' + d.getMinutes();

      if (hour.length < 2)
        hour = '0' + hour;
      if (minutes.length < 2)
        minutes = '0' + minutes;

      return [hour, minutes].join(':');
    }
  </script>

</body>

</html>
